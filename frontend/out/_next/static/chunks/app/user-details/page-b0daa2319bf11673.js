(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{6046:(e,o,t)=>{"use strict";var n=t(6658);t.o(n,"useRouter")&&t.d(o,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(o,{useSearchParams:function(){return n.useSearchParams}})},7543:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>l});var n=t(5155),r=t(2115),a=t(6046);let s=()=>{let e=(0,a.useSearchParams)(),o=(0,a.useRouter)(),[t,s]=(0,r.useState)(!1),[l,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),u=e.get("job_id")||"",m=e.get("name")||"",p=e.get("gender")||"",h=e.get("preview_url")||"",x=e.get("book_id")||"",[b,g]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),w=async()=>{try{if(i(null),d(null),!b.trim()||!f.trim()){i("Please fill in all fields.");return}if(s(!0),!(await fetch("https://diffrun.com/save-user-details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:u,name:m,gender:p,preview_url:h,email:b,user_name:f})})).ok)throw Error("Failed to save user details.");d("Your details have been saved successfully!"),o.push("/purchase?job_id=".concat(encodeURIComponent(u),"&name=").concat(encodeURIComponent(m),"&gender=").concat(encodeURIComponent(p),"&book_id=").concat(encodeURIComponent(x),"&preview_url=").concat(encodeURIComponent(h)))}catch(e){console.error("Error saving user details:",e.message),i(e.message||"An error occurred. Please try again.")}finally{s(!1)}};return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-[90vh] bg-gray-100 p-4",children:[(0,n.jsxs)("div",{className:"w-full max-w-md bg-white border border-gray-900 shadow-[8px_8px_0px_rgba(0,0,0,0.9)] rounded-none p-8 space-y-8",children:[(0,n.jsx)("h2",{className:"text-gray-900 text-2xl font-bold text-center",children:"Get Your Book Preview & Price"}),l&&(0,n.jsx)("p",{className:"text-red-600 text-sm font-medium text-center",children:l}),(0,n.jsxs)("div",{className:"w-full space-y-1 text-left",children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-black font-bold tracking-wide",children:"Email"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 font-mono",children:"Preview link will be sent to this email"}),(0,n.jsx)("input",{type:"email",id:"email",value:b,onChange:e=>g(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-900 rounded-none focus:border-indigo-500",placeholder:"you@example.com"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"username",className:"block text-black font-bold tracking-wide",children:"Name"}),(0,n.jsx)("input",{type:"text",value:f,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 border border-gray-900 rounded-none focus:border-indigo-500",required:!0,placeholder:"John Doe"})]}),(0,n.jsx)("button",{onClick:w,disabled:t,className:"w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-semibold py-3 rounded-none shadow-[8px_8px_0px_rgba(0,0,0,0.9)]",children:t?"Saving...":"Save Preview & Show Price"})]}),(0,n.jsx)("button",{onClick:()=>{o.push("/preview?job_id=".concat(encodeURIComponent(u),"&name=").concat(encodeURIComponent(m),"&gender=").concat(encodeURIComponent(p),"&book_id=").concat(encodeURIComponent(x),"&preview_url=").concat(encodeURIComponent(h)))},className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 transition-colors duration-200 text-white font-semibold py-3 px-4 mt-12 rounded-none shadow-[8px_8px_0px_rgba(0,0,0,0.9)]",children:"Back to Preview"})]})};function l(){return(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(s,{})})}},9976:(e,o,t)=>{Promise.resolve().then(t.bind(t,7543))}},e=>{var o=o=>e(e.s=o);e.O(0,[441,587,358],()=>o(9976)),_N_E=e.O()}]);