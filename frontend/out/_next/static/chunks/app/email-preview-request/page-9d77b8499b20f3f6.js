(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[680],{4254:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var n=r(5155),a=r(2115),o=r(8173),l=r.n(o),i=r(4710),s=r(9234),c=r(5403),u=r(9656),d=r(7249);class p extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=e instanceof HTMLElement&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:r,anchorX:o}=e,l=(0,a.useId)(),i=(0,a.useRef)(null),s=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,a.useContext)(d.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:a,right:u}=s.current;if(r||!i.current||!e||!t)return;i.current.dataset.motionPopId=l;let d=document.createElement("style");return c&&(d.nonce=c),document.head.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===o?"left: ".concat(a):"right: ".concat(u),"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{document.head.removeChild(d)}},[r]),(0,n.jsx)(p,{isPresent:r,childRef:i,sizeRef:s,children:a.cloneElement(t,{ref:i})})}let f=e=>{let{children:t,initial:r,isPresent:o,onExitComplete:l,custom:i,presenceAffectsLayout:c,mode:d,anchorX:p}=e,f=(0,s.M)(m),x=(0,a.useId)(),b=(0,a.useCallback)(e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;l&&l()},[f,l]),g=(0,a.useMemo)(()=>({id:x,initial:r,isPresent:o,custom:i,onExitComplete:b,register:e=>(f.set(e,!1),()=>f.delete(e))}),c?[Math.random(),b]:[o,b]);return(0,a.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[o]),a.useEffect(()=>{o||f.size||!l||l()},[o]),"popLayout"===d&&(t=(0,n.jsx)(h,{isPresent:o,anchorX:p,children:t})),(0,n.jsx)(u.t.Provider,{value:g,children:t})};function m(){return new Map}var x=r(5087);let b=e=>e.key||"";function g(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let y=e=>{let{children:t,custom:r,initial:o=!0,onExitComplete:l,presenceAffectsLayout:u=!0,mode:d="sync",propagate:p=!1,anchorX:h="left"}=e,[m,y]=(0,x.xQ)(p),k=(0,a.useMemo)(()=>g(t),[t]),w=p&&!m?[]:k.map(b),v=(0,a.useRef)(!0),j=(0,a.useRef)(k),E=(0,s.M)(()=>new Map),[P,_]=(0,a.useState)(k),[N,R]=(0,a.useState)(k);(0,c.E)(()=>{v.current=!1,j.current=k;for(let e=0;e<N.length;e++){let t=b(N[e]);w.includes(t)?E.delete(t):!0!==E.get(t)&&E.set(t,!1)}},[N,w.length,w.join("-")]);let C=[];if(k!==P){let e=[...k];for(let t=0;t<N.length;t++){let r=N[t],n=b(r);w.includes(n)||(e.splice(t,0,r),C.push(r))}return"wait"===d&&C.length&&(e=C),R(g(e)),_(k),null}let{forceRender:S}=(0,a.useContext)(i.L);return(0,n.jsx)(n.Fragment,{children:N.map(e=>{let t=b(e),a=(!p||!!m)&&(k===N||w.includes(t));return(0,n.jsx)(f,{isPresent:a,initial:(!v.current||!!o)&&void 0,custom:r,presenceAffectsLayout:u,mode:d,onExitComplete:a?void 0:()=>{if(!E.has(t))return;E.set(t,!0);let e=!0;E.forEach(t=>{t||(e=!1)}),e&&(null==S||S(),R(j.current),p&&(null==y||y()),l&&l())},anchorX:h,children:e},t)})})};var k=r(7112),w=r(6046);let v=()=>{let[e,t]=(0,a.useState)("form"),[r,o]=(0,a.useState)({email:"",name:""}),i=(0,w.useSearchParams)(),s=i.get("job_id")||"",c=i.get("name")||"",u=i.get("gender")||"",d=i.get("job_type")||"",p=i.get("book_id")||"",h=i.get("selected")||"",f=async e=>{e.preventDefault();let n="https://diffrun.com/preview?job_id=".concat(s,"&paid=false&approved=false&selected=").concat(h,"&job_type=").concat(d,"&book_id=").concat(p,"&name=").concat(c,"&gender=").concat(u);try{if(!(await fetch("https://diffrun.com/send-mail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r.name,name:c,email:r.email,preview_url:n})})).ok)throw Error("Failed to send email");t("thankYou")}catch(e){console.error("Email send error:",e),alert("Failed to send email. Please try again.")}};return(0,n.jsx)("section",{className:"py-10 h-[80vh] flex items-center justify-center px-4 bg-gray-100",children:(0,n.jsxs)(y,{mode:"wait",children:["form"===e&&(0,n.jsxs)(k.P.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},exit:{opacity:0,y:-40},transition:{duration:.5},className:"w-full max-w-lg p-6 sm:p-10 bg-white border-[4px] border-black shadow-[8px_8px_0px_rgba(0,0,0,1)] transition-all",children:[(0,n.jsx)("h2",{className:"text-2xl sm:text-3xl font-extrabold text-black uppercase tracking-tight mb-10 text-center",children:"Request Email Preview"}),(0,n.jsxs)("form",{onSubmit:f,className:"flex flex-col gap-4",children:[(0,n.jsx)("input",{type:"text",placeholder:"YOUR NAME",value:r.name,onChange:e=>o({...r,name:e.target.value}),required:!0,className:"p-4 border-[3px] border-black bg-gradient-to-r from-yellow-100 to-white text-black placeholder-black font-semibold tracking-wider focus:outline-none focus:ring-2 focus:ring-pink-400"}),(0,n.jsx)("input",{type:"email",placeholder:"YOUR EMAIL",value:r.email,onChange:e=>o({...r,email:e.target.value}),required:!0,className:"p-4 border-[3px] border-black bg-gradient-to-r from-pink-100 to-white text-black placeholder-black font-semibold tracking-wider focus:outline-none focus:ring-2 focus:ring-yellow-400"}),(0,n.jsx)("button",{type:"submit",className:"p-4 bg-black text-white uppercase font-bold text-lg border-[3px] border-black hover:bg-white hover:text-black transition-all duration-200 active:translate-y-1",children:"Submit"})]})]},"form"),"thankYou"===e&&(0,n.jsxs)(k.P.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},exit:{opacity:0,y:-40},transition:{duration:.5},className:"w-full max-w-lg p-6 sm:p-10 bg-white border-[4px] border-black shadow-[8px_8px_0px_rgba(0,0,0,1)] transition-all text-center",children:[(0,n.jsx)("h2",{className:"text-3xl sm:text-4xl font-extrabold text-green-700 uppercase mb-4",children:"Thank You!"}),(0,n.jsx)("p",{className:"text-black font-medium mb-2",children:"We've received your request."}),(0,n.jsx)("p",{className:"text-gray-700 mb-6",children:"You'll get your preview soon. Meanwhile, check out more stories:"}),(0,n.jsx)(l(),{href:"/",className:"block w-full p-4 bg-black text-white text-lg uppercase font-bold border-[3px] border-black hover:bg-white hover:text-black transition-all duration-200 active:translate-y-1",passHref:!0,children:"Go to Home Page"})]},"thankYou")]})})};function j(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(v,{})})}},6046:(e,t,r)=>{"use strict";var n=r(6658);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},9491:(e,t,r)=>{Promise.resolve().then(r.bind(r,4254))}},e=>{var t=t=>e(e.s=t);e.O(0,[112,441,587,358],()=>t(9491)),_N_E=e.O()}]);